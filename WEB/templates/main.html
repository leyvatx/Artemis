<!-- ----------------------------------------------------------------------- -->

{% load static %}

<!DOCTYPE html>
<html lang='es'>

<!-- ----------------------------------------------------------------------- -->

<head>
    <meta charset='UTF-8' />
    <meta name='theme-color' content='#F6F8F8' media='(prefers-color-scheme: light)' />
    <meta name='theme-color' content='#161D1D' media='(prefers-color-scheme: dark)' />

    <meta name='author' content='Artemis ― (Ed Rubio)' />
    <meta name='description' content='Panel de administración' />
    <meta name='viewport' content='width=device-width, initial-scale=1' />

    <title>{% block title %}{% endblock title %} | Artemis</title>
    <link rel='shortcut icon' type='image/png' href='{% static "images/favicon.png" %}'>

    <link href='{% static "css/main.css" %}' rel='stylesheet' />
    <link href='{% static "css/dashboard/base.css" %}' rel='stylesheet' />
    {% block stylesheet %}{% endblock stylesheet %}

    <script src='{% static "scripts/main.js" %}' defer></script>
    {% block scripts %}{% endblock scripts %}

    <!-- Google Icons CSS -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
</head>

<!-- ----------------------------------------------------------------------- -->

<body data-supervisor-id="{{ auth_user.id }}" data-api-url="{{ api_base_url }}">

    <aside class='main-sidebar-container'>
        <div class='main-sidebar'>

            <!-- Header del SIDEBAR -->
            <div class='main-sidebar-header'>
                <img src='{% static "images/mainicon.webp" %}' alt='Artemis (logotipo)'>
                <h1>Artemis™</h1>
            </div>

            <!-- Enlaces de navegación del SIDEBAR -->
            <nav class='main-sidebar-content'>
                <a href='{% url "dashboard:Home" %}' class='main-sidebar-button'>
                    <span class='material-symbols-outlined'>home</span>
                    <p>Inicio</p>
                </a>

                <a href='{% url "dashboard:OfficersList" %}' class='main-sidebar-button'>
                    <span class='material-symbols-outlined'>local_police</span>
                    <p>Oficiales</p>
                </a>

                <a href='{% url "dashboard:AlertsList" %}' class='main-sidebar-button'>
                    <span class='material-symbols-outlined'>notifications_active</span>
                    <p>Alertas</p>
                </a>

                <a href='{% url "dashboard:Geolocation" %}' class='main-sidebar-button'>
                    <span class='material-symbols-outlined'>location_searching</span>
                    <p>Geolocalización</p>
                </a>

                <a href='{% url "dashboard:Analytics" %}' class='main-sidebar-button'>
                    <span class='material-symbols-outlined'>planner_review</span>
                    <p>Análisis</p>
                </a>

                <a href='{% url "dashboard:ReportsList" %}' class='main-sidebar-button'>
                    <span class='material-symbols-outlined'>library_books</span>
                    <p>Reportes</p>
                </a>
            </nav>

            <!-- Footer del SIDEBAR -->
            <div class='main-sidebar-footer'>
                <a id='theme-toggle' class='main-sidebar-button'>
                    <span class='material-symbols-outlined'>contrast</span>
                    <p>Cambiar tema</p>
                </a>

                <a href='{% url "dashboard:Logout" %}' class='main-sidebar-button logout-button'>
                    <span class='material-symbols-outlined'>logout</span>
                    <p>Cerrar sesión</p>
                </a>
            </div>

        </div>
    </aside>

    <main class='main-content'>
        <header class='main-header'>

            <!-- Botón de activación del SIDEBAR -->
            <div class='main-header-toggle'>
                <span class='material-symbols-outlined' id='toggle-main-sidebar'>menu_open</span>
            </div>

            <!-- Área de usuario y notificaciones -->
            <div class='main-header-user-area'>

                <!-- Notificaciones -->
                <div class='notifications-dropdown'>
                    <span class='material-symbols-outlined main-header-notifications-icon' id='toggle-notifications'>
                        notifications
                    </span>
                    <span class='notification-badge' id='notification-badge'></span>

                    <div class='dropdown-menu' id='notifications-menu'>
                        <h4>Alertas de Oficiales</h4>

                        <ul id='alerts-list'>
                            <li class='loading'>Cargando alertas...</li>
                        </ul>

                        <a href='{% url "dashboard:AlertsList" %}' class='dropdown-footer'>Ver todas las alertas</a>
                    </div>
                </div>

                <!-- Perfil de usuario -->
                <a class='main-header-user-info' href='{% url "dashboard:SupervisorDetail" auth_user.id %}'>
                    {% if auth_user.picture %}
                    <img class='supervisor-picture' src='{{ auth_user.picture }}'
                        alt='Foto del supervisor: {{ auth_user.name }}'>
                    {% else %}
                    <span class='user-initial-circle'>{{ auth_user.name|first }}</span>
                    {% endif %}
                </a>
            </div>

        </header>

        <!-- Mensajes de Django -->
        {% if messages %}
        <div class='django-messages'>
            {% for message in messages %}
            <div class='message {{ message.tags }}'>
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <!-- Contenido dinámico -->
        <section class='main-container'>
            {% block content %}{% endblock content %}
        </section>

        <footer class='main-footer'>
            <p>© 2025 Artemis. Todos los derechos reservados.</p>
        </footer>
    </main>

</body>

</html>

<!-- ----------------------------------------------------------------------- -->